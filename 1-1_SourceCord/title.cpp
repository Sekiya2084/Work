/*==============================================================================

   タイトルシーン管理 [title.cpp]
														 Author :関谷勇人
														 Date   :2023/06/16
--------------------------------------------------------------------------------

==============================================================================*/
#include "title.h"
#include "titleBG.h"
#include "input.h"
#include "fade.h"
#include "sound.h"

//-----------------------------------------------------------------------------
// グローバル変数
//-----------------------------------------------------------------------------

static int g_TitleBGMNo = 0;
bool swt = true;

//=============================================================================
// 初期化処理
//=============================================================================
void InitTitle(void)
{
	//サウンドの読み込み
	g_TitleBGMNo = LoadSound((char*)"data/BGM/title.wav");
	
	//タイトル背景管理の初期化処理
	InitTitleBG();

	//BGMを流す
	PlaySound(g_TitleBGMNo, -1);

	//ボリューム調整
	SetVolume(g_TitleBGMNo, 0.7f);
	swt = true;
}

//=============================================================================
// 終了処理
//=============================================================================
void UninitTitle(void)
{
	//タイトル背景管理の終了処理
	UninitTitleBG();
	StopSoundAll();
}

//=============================================================================
// 更新処理
//=============================================================================
void UpdateTitle(void)
{
	//タイトル背景管理の更新処理
	UpdateTitleBG();

	if (GetKeyboardTrigger(DIK_RETURN) && swt)
	{
		swt = false;
		SetFade(FADE_OUT);
	}
}

//=============================================================================
// 描画処理
//=============================================================================
void DrawTitle(void)
{
	//タイトル背景管理の描画処理
	DrawTitleBG();
}
